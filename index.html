<!DOCTYPE html>

<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport"/>
<title>ã‚¦ã‚¯ãƒ¬ãƒ¬ã§ã‚ãã¼ã†</title>
<style>
  :root{ --vh: 1vh; }

  html, body {
    margin: 0; padding: 0;
    width: 100%;
    height: 100dvh;
    height: calc(var(--vh) * 100);
    overflow: hidden;
    position: fixed;
    background: #f4f9ff;
    font-family: "Hiragino Sans", "Arial", sans-serif;
    touch-action: none;
  }
  body { display: flex; justify-content: center; align-items: center; }

  /* ã‚¿ã‚¤ãƒˆãƒ« */
  .title {
    position: fixed; top: calc(env(safe-area-inset-top) + (var(--vh) * 6)); right: 6vw;
    font-size: clamp(24px, 6vw, 34px);
    font-weight: 600; letter-spacing: 0.08em;
    color: #333; z-index: 10; user-select: none;
  }

  /* ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
  .menu {
    position: fixed; right: 6vw; top: 24vh;
    display: flex; flex-direction: column; gap: 14px; z-index: 10;
  }
  .menu button {
    min-width: 180px; padding: 14px 18px;
    font-size: 17px; font-weight: 600; color: #333;
    background: rgba(255,255,255,0.9);
    border: 1.5px solid #ddd; border-radius: 12px;
    cursor: pointer; text-align: left;
    box-shadow: 0 4px 10px rgba(0,0,0,0.06);
    transition: transform 0.1s;
    text-decoration: none; display: block;
  }
  .menu button:active { transform: scale(0.98); }
  .menu button.primary { background: #eef6ff; border-color: #c9ddff; color: #234; }

  /* èƒŒæ™¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
  .palm-wrap {
    width: 100vw; height: 100vh;
    animation: palm-sway 12s ease-in-out infinite;
    transform-origin: 35% 90%;
    pointer-events: none;
  }
  svg { width: 100vw; height: 100vh; transform: translateX(-22vw); }
  @keyframes palm-sway {
    0%,100% { transform: rotate(-0.8deg); }
    50%     { transform: rotate(0.8deg); }
  }


  /* ===== è¿½åŠ : ã¯ã˜ã‚ã¦/ä¸­ç´š + ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°èª˜å°ï¼ˆã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãªã—ï¼‰ ===== */
  .overlay {
    position: fixed; inset: 0; z-index: 999;
    display: none; align-items: center; justify-content: center;
    background: rgba(0,0,0,0.35);
    backdrop-filter: blur(2px);
  }
  .overlay.show { display: flex; }
  .card {
    width: min(560px, 92vw);
    background: rgba(255,255,255,0.96);
    border-radius: 16px;
    box-shadow: 0 12px 30px rgba(0,0,0,0.18);
    padding: 16px;
    color: #222;
  }
  .card h2 {
    margin: 0 0 10px;
    font-size: 18px;
    letter-spacing: 0.04em;
  }
  .card p { margin: 6px 0 0; font-size: 13px; line-height: 1.4; opacity: 0.9; }
  .choiceRow { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 12px; }
  .choiceBtn {
    border: 2px solid rgba(0,0,0,0.10);
    border-radius: 14px;
    padding: 12px;
    background: #fff;
    font-weight: 900;
    font-size: 15px;
    cursor: pointer;
    text-align: left;
    box-shadow: 0 4px 0 rgba(122,177,204,0.20);
  }
  .choiceBtn:active { transform: translateY(1px); box-shadow: none; }
  .choiceBtn .sub { display:block; font-weight: 700; font-size: 12px; opacity: 0.85; margin-top: 4px; }

  .actions { display: grid; grid-template-columns: 1fr; gap: 10px; margin-top: 12px; }
  .actionBtn {
    border: none; border-radius: 14px; padding: 12px 14px;
    font-weight: 900; font-size: 16px; cursor: pointer;
    box-shadow: 0 5px 14px rgba(0,0,0,0.12);
  }
  .actionPrimary { background: #eef6ff; color: #234; border: 2px solid #c9ddff; }
  .actionSecondary { background: #fff; color: #333; border: 2px solid #e6e6e6; }
  .actionSecondary small { display:block; font-size: 12px; opacity: 0.78; margin-top: 4px; font-weight: 800; }

  .tinyNote { margin-top: 10px; font-size: 12px; opacity: 0.78; }

  .version-badge{
    position: fixed; left: 10px; bottom: 10px; z-index: 20;
    font-size: 11px; font-weight: 800; color: #234;
    background: rgba(255,255,255,0.72);
    border: 1px solid rgba(0,0,0,0.08);
    padding: 4px 8px; border-radius: 10px;
    pointer-events: none;
  }


  .verBadge{position:fixed;right:10px;bottom:10px;background:rgba(0,0,0,0.55);color:#fff;font-size:12px;padding:4px 8px;border-radius:10px;z-index:9999;pointer-events:none;}


/* === KIDS UI THEME (SAFE: style/text only) ========================= */
:root{
  --kids-font: "M PLUS Rounded 1c","Hiragino Maru Gothic ProN","Hiragino Sans","Arial",sans-serif;
  --kids-ink: #2b2017;
  --kids-white: rgba(255,255,255,0.96);
  --kids-shadow: 0 10px 0 rgba(0,0,0,0.10), 0 18px 26px rgba(0,0,0,0.18);
}

/* font */
body, button, input, select, textarea { font-family: var(--kids-font) !important; }

/* soft playful background (lightweight) */
body::before{
  content:"";
  position:fixed; inset:0;
  pointer-events:none;
  background-image:
    radial-gradient(circle at 12% 22%, rgba(255,255,255,0.55) 0 14px, transparent 15px),
    radial-gradient(circle at 78% 18%, rgba(255,255,255,0.45) 0 10px, transparent 11px),
    radial-gradient(circle at 40% 82%, rgba(255,255,255,0.40) 0 12px, transparent 13px),
    radial-gradient(circle at 90% 76%, rgba(255,255,255,0.35) 0 9px, transparent 10px);
  opacity: 0.75;
  mix-blend-mode: soft-light;
}

/* version badge: move away from buttons */
.verBadge{
  left: calc(10px + env(safe-area-inset-left)) !important;
  right: auto !important;
  bottom: calc(10px + env(safe-area-inset-bottom)) !important;
  font-size: 12px !important;
  border-radius: 14px !important;
}

/* index-specific */
body { background: linear-gradient(135deg, #fff1eb 0%, #ace0f9 100%) !important; }

.kids-mascot{
  font-size: 72px;
  line-height: 1;
  filter: drop-shadow(0 10px 0 rgba(0,0,0,0.10));
  transform-origin: bottom center;
  animation: kidsWiggle 3s ease-in-out infinite;
  margin-bottom: 6px;
}
@keyframes kidsWiggle{ 0%,100%{ transform: rotate(-6deg);} 50%{ transform: rotate(6deg);} }

.menu button, .gateButtons button{
  border: 4px solid #fff !important;
  border-radius: 28px !important;
  box-shadow: var(--kids-shadow) !important;
  font-weight: 900 !important;
  color: #fff !important;
  padding: 14px 18px !important;
  text-align: left !important;
}
.menu button:active, .gateButtons button:active{
  transform: translateY(6px) !important;
  box-shadow: 0 3px 0 rgba(0,0,0,0.12), 0 6px 10px rgba(0,0,0,0.12) !important;
}
#btn-start{ background: linear-gradient(to bottom, #ff9a44, #fc6076) !important; }
#btn-tuning{ background: linear-gradient(to bottom, #4facfe, #00f2fe) !important; }
#btn-help{ background: linear-gradient(to bottom, #43e97b, #38f9d7) !important; color: #1d5a41 !important; text-shadow:none !important; }

.title, .subtitle, .subTitle, .desc{
  color: var(--kids-ink) !important;
}


</style>
<link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@500;800;900&amp;display=swap" rel="stylesheet"/></head>
<body><div aria-hidden="true" class="kids-mascot">ğŸ¼</div>
<div class="title">ã‚¦ã‚¯ãƒ¬ãƒ¬ã§ã‚ãã¼ã†</div>
<div class="menu">
<button class="primary" id="btn-start" onclick="startFlow()">ğŸ® ã‚²ãƒ¼ãƒ ã§ ã‚ãã¶</button>
<button id="btn-tuning" onclick="location.href='tuning.html'">ğŸª• ãŠã¨ã® ã˜ã‚…ã‚“ã³</button>
<button id="btn-help" onclick="alert('éŸ³ã«åˆã‚ã›ã¦ç”»é¢ã‚’ã‚¿ãƒƒãƒ—ã—ãŸã‚Šã€å®Ÿéš›ã«ã‚¦ã‚¯ãƒ¬ãƒ¬ã‚’å¼¾ã„ã¦éŠã¶ã‚²ãƒ¼ãƒ ã§ã™ï¼')">â“ ã‚ãã³ã‹ãŸ</button>
</div>
<div class="palm-wrap">
<svg aria-hidden="true" preserveaspectratio="xMidYMid meet" viewbox="0 0 800 600">
<ellipse cx="400" cy="500" fill="#cfeeb0" rx="260" ry="60"></ellipse>
<path d="M360 480 C300 360, 340 260, 330 160 C320 80, 300 40, 280 20 L320 20 C360 60, 380 120, 390 200 C400 300, 380 380, 420 480 Z" fill="#7a4a21"></path>
<path d="M310 350 Q350 340 380 330" fill="none" stroke="#d8b04c" stroke-width="8"></path>
<path d="M300 300 Q340 290 370 280" fill="none" stroke="#d8b04c" stroke-width="8"></path>
<path d="M295 250 Q330 240 360 230" fill="none" stroke="#d8b04c" stroke-width="8"></path>
<g fill="#6aaa1f">
<path d="M330 40 C180 20, 60 120, 40 200"></path>
<path d="M330 40 C200 0, 120 40, 90 100"></path>
<path d="M330 40 C460 20, 580 120, 620 220"></path>
<path d="M330 40 C480 0, 620 40, 660 120"></path>
<path d="M330 50 C310 10, 330 0, 350 -20"></path>
</g>
<circle cx="340" cy="60" fill="#c8b04a" r="18"></circle>
<circle cx="365" cy="65" fill="#c8b04a" r="18"></circle>
<g transform="translate(440 420) rotate(-15)">
<ellipse cx="50" cy="80" fill="#c68642" rx="45" ry="60"></ellipse>
<ellipse cx="50" cy="80" fill="#5a3a1a" rx="12" ry="16"></ellipse>
<rect fill="#b5651d" height="70" width="12" x="44" y="10"></rect>
<rect fill="#d79a3a" height="20" rx="5" width="40" x="30" y="-20"></rect>
<line stroke="#ffffff" stroke-width="2" x1="48" x2="48" y1="10" y2="150"></line>
<line stroke="#ffffff" stroke-width="2" x1="52" x2="52" y1="10" y2="150"></line>
</g>
</svg>
</div>
<div aria-hidden="true" class="overlay" id="levelOverlay">
<div class="card">
<h2>ã©ã£ã¡ã§ ã‚ãã¶ï¼Ÿ</h2>
<p>ã¯ã˜ã‚ã¦ã®äººã¯ã€Œã¯ã˜ã‚ã¦ï¼ˆåˆç´šï¼‰ã€ãŒãŠã™ã™ã‚ã€‚</p>
<div class="choiceRow">
<button class="choiceBtn" onclick="chooseLevel('beginner')">â‘  ã¯ã˜ã‚ã¦ï¼ˆåˆç´šï¼‰<span class="sub">ã‚†ã£ãã‚Šãƒ»ã‚„ã•ã—ã‚</span></button>
<button class="choiceBtn" onclick="chooseLevel('intermediate')">â‘¡ ã ã„ãŸã„ ã‚ã‹ã‚‹ï¼ˆä¸­ç´šï¼‰<span class="sub">ãµã¤ã†ã®ã‚¹ãƒ”ãƒ¼ãƒ‰</span></button>
</div>
<div class="tinyNote">â€»ã‚ã¨ã§å¤‰æ›´ã§ãã¾ã™ï¼ˆTOPç”»é¢ã§é¸ã³ç›´ã—ï¼‰</div>
</div>
</div>
<div aria-hidden="true" class="overlay" id="gateOverlay">
<div class="card">
<h2>ã‚²ãƒ¼ãƒ ã®ã¾ãˆã«ã€ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã—ã‚ˆã†</h2>
<p>ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã™ã‚‹ã¨ã€ã‚ãªãŸã®éŸ³ã«åˆã‚ã›ã¦ã€ŒHITã®åˆ¤å®šã€ã‚’èª¿æ•´ã§ãã¾ã™ã€‚</p>
<div class="actions">
<button class="actionBtn actionPrimary" onclick="goTuning()">ğŸª• ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã—ã¦ã‹ã‚‰ã‚²ãƒ¼ãƒ </button>
<button class="actionBtn actionSecondary" onclick="goGameTap()">ğŸª• ã¾ãšã¯ã‚¿ãƒƒãƒ—ã§ ã‚ãã¶<small>ï¼ˆãƒã‚¤ã‚¯ãªã—ã§ã‚‚OKï¼‰</small></button>
</div>
</div>
</div>
<div class="version-badge">v_index_safe_2026-01-18a</div>
<script>
(function(){
  function setVh(){
    const vv = window.visualViewport;
    const h = vv ? vv.height : (document.documentElement.clientHeight || window.innerHeight);
    document.documentElement.style.setProperty('--vh', (h * 0.01) + 'px');
  }
  setVh();
  if(window.visualViewport){
    window.visualViewport.addEventListener('resize', setVh);
    window.visualViewport.addEventListener('scroll', setVh);
  }
  window.addEventListener('resize', setVh);
  window.addEventListener('orientationchange', () => setTimeout(setVh, 250));

  const KEY_LEVEL = 'uk_level_v1';
  const KEY_TUNING = 'uk_game_thresholds_v1';

  function show(id){ document.getElementById(id).classList.add('show'); }
  function hide(id){ document.getElementById(id).classList.remove('show'); }

  window.chooseLevel = function(level){
    try{ localStorage.setItem(KEY_LEVEL, level); }catch(e){}
    hide('levelOverlay');
    // ãƒ¬ãƒ™ãƒ«é¸æŠå¾Œã¯ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°èª˜å°ã¸
    show('gateOverlay');
  };

  function getLevel(){
    try{ return localStorage.getItem(KEY_LEVEL); }catch(e){ return null; }
  }

  function hasFreshTuning(){
    try{
      const raw = localStorage.getItem(KEY_TUNING);
      if(!raw) return false;
      const o = JSON.parse(raw);
      if(!o || !o.ts) return false;
      // 24æ™‚é–“ä»¥å†…ãªã‚‰ã€Œä»Šæ—¥ã®ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã€ã¨ã¿ãªã™
      return (Date.now() - Number(o.ts)) < 24*60*60*1000;
    }catch(e){
      return false;
    }
  }

  window.startFlow = function(){
    // ã¾ãšãƒ¬ãƒ™ãƒ«ãŒæœªè¨­å®šãªã‚‰é¸ã‚“ã§ã‚‚ã‚‰ã†
    const lv = getLevel();
    if(!lv){ show('levelOverlay'); return; }

    // ã“ã“ã¯ã€ŒåŠå¼·åˆ¶ã€æ–¹é‡ï¼šåŸºæœ¬ã¯ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã¸èª˜å°
    // ãŸã ã—ã€ã™ã§ã«ä»Šæ—¥ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°æ¸ˆã¿ãªã‚‰ gateOverlay ã¯å‡ºã•ãšã‚²ãƒ¼ãƒ ã¸
    if(hasFreshTuning()){
      location.href = 'game.html';
      return;
    }
    show('gateOverlay');
  };

  window.goTuning = function(){
    hide('gateOverlay');
    location.href = 'tuning.html?next=game';
  };

  window.goGameTap = function(){
    hide('gateOverlay');
    // ã¾ãšã¯ã‚¿ãƒƒãƒ—ã§éŠã¹ã‚‹å°ç·š
    location.href = 'game.html?mode=TAP';
  };

})();
</script>
<div class="verBadge">v_release_20260118_index</div>
</body>
</html>